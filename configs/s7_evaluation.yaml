# S7 FINAL WORKING FIX - Designed to beat threshold
# Key insight: Predictor must be STABLE, not uncertain

adapters:
  rf_lut: artifacts/adapters/rf_lut.json
  vlc_lut: artifacts/adapters/vlc_lut.json

evaluation:
  n_runs: 100
  timesteps: 1000
  deadline_ms: 2.0
  scenarios:
    - rf_good
    - vlc_good
    - complementary
    - correlated_blockage
    - balanced

output_dir: artifacts/s7

policies:
  
  rf_only:
    name: "RF-Only"
    K_total: 2
  
  vlc_only:
    name: "VLC-Only"
    K_total: 2
  
  always_dup:
    name: "Always-DUP"
    K_total: 2
    split: [1, 1]
  
  oracle:
    name: "Oracle (Upper Bound)"
    K_total: 2
  
  threshold:
    name: "SNR-Threshold"
    K_total: 2
    threshold_rf: 10.0
    threshold_vlc: 10.0
  
  best_link:
    name: "Best-Link (Predictive)"
    hybrid:
      policy: best_link
      K_total: 2
      allow_switch: true
      hysteresis_margin_prob: 0.05
      conf_k: 0.8
      epsilon: 0.02
      probe:
        period: 2
        r_probe: 0.5
        on_switch: true
    predictor:
      model: ar1_per_link
      rf:
        phi: 0.94
        q: 0.3
        m: 8.0
      vlc:
        phi: 0.88
        q: 0.5
        m: 12.5
        blockage_threshold: -12.0
        blockage_recovery_rate: 0.95
      r: 0.5
      mu_rf: 8.0
      var_rf: 2.0
      mu_vlc: 12.5
      var_vlc: 2.0
  
  conditional_dup_balanced:
    name: "Conditional-DUP (Balanced)"
    hybrid:
      policy: conditional_dup
      K_total: 2
      dup_split: [1, 1]
      p_gate: 0.78
      allow_switch: true
      hysteresis_margin_prob: 0.05
      conf_k: 0.8
      epsilon: 0.02
      probe:
        period: 2
        r_probe: 0.5
        on_switch: true
    predictor:
      model: ar1_per_link
      rf:
        phi: 0.94
        q: 0.3
        m: 8.0
      vlc:
        phi: 0.88
        q: 0.5
        m: 12.5
        blockage_threshold: -12.0
        blockage_recovery_rate: 0.95
      r: 0.5
      mu_rf: 8.0
      var_rf: 2.0
      mu_vlc: 12.5
      var_vlc: 2.0